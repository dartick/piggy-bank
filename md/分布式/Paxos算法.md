# Paxos算法

## 背景

在常见的 **分布式系统** 中，总会发生 **节点宕机** 或 **网络异常** (包括消息的 **重复**、**丢失**、**延迟**、**乱序**、**网络分区**) 等情况。

`Paxos` 算法主要就是解决如何在一个 **发生如上故障** 的分布式系统中，快速正确的在集群内 **对某个值达成一致**，并且保证 **整个系统的一致性**。

> 更贴近的生活的一个例子:
>
> 比如一群小伙伴**A, B, C, D, E**约定了去秋游, 但是目的地没有确定, 于是他们选择在**微信**上提出各自的意见, 但又出现了问题, 每个人提的意见不一致, **A**提出了去广东, **B**提了出上海,,,同时由于**微信**消息发送不可靠, 导致有的小伙伴提的意见延迟了, 或者丢失了, 甚至收不到消息. 那么此种场景下可以通过**Paxos**算来解决此问题, 以得出最后的目的地.
>
> 贴近应用场景的例子:
>
> Redis集群主节点宕机, 从节点选主问题

## 算法描述

### 概念定义

**提案 (Proposal)**: 即每个小伙伴提的目的地

**Proposer** : `Proposer` 可以 **提出提案** (`Proposal`)。即小伙伴.

**Accecptor** : `Acceptor` 可以 **接受提案**。一旦接受提案，**提案** 里面的 `value` 值就被选定了。决策者, 决定选取哪个目的地, 可先理解为小伙伴.

**Learner** : `Acceptor` 告诉 `Learner` 哪个提案被选定了，那么 `Learner` 就学习这个被选择的 `value`。接收结果, 决定出目的后, 得接收这个结果, 也可先理解为小伙伴.

![img](https://user-gold-cdn.xitu.io/2018/6/17/1640df969e7f7d16?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)

> 在具体的实现中，一个进程即可能是Proposer,也可能是Acceptor，也可能是Learner。

### 算法流程

